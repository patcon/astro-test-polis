---
---
<div id="static-modal" data-modal-backdrop="static" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
    <div class="relative p-4 w-full max-w-2xl max-h-full">
        <!-- Modal content -->
        <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
            <!-- Modal header -->
            <div class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600">
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                    Warning
                </h3>
            </div>
            <!-- Modal body -->
            <div class="p-4 md:p-5 space-y-4">
                <p class="text-base leading-relaxed text-gray-500 dark:text-gray-400">
                    It looks like you make be returning from a new device...
                </p>
                <p class="text-base leading-relaxed text-gray-500 dark:text-gray-400">
                  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                </p>
                <p class="text-base leading-relaxed text-gray-500 dark:text-gray-400">
                  If you continue here, you will be starting over and duplicating your voting record.
                </p>
            </div>
            <!-- Modal footer -->
            <div class="flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600">
              <a href="/pre-survey" class="text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center me-2">
                Yes, start a second<br /> voting session...
              </button>
              <a href="/restore-session" class="text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600">
                No, help me restore <br /> my existing voting session.
              </a>
            </div>
        </div>
    </div>
</div>
<script>
  const params = new URLSearchParams(document.location.search);
  const isReturn = params.get("return");
  const xid = localStorage.getItem("polisUserXid");
  const isDoneSurvey = localStorage.getItem("isDoneSurvey");

  if (!xid || !isDoneSurvey) {
    if (isReturn) {
      // Returning, but missing session data.
      const elem = document.getElementById("static-modal");
      const modal = new Flowbite.default.Modal(elem, { backdrop: "static", closable: false });
      modal.show();
    } else {
      // Arriving without any session history, so redirect to front page.
      // TODO: Consider still warning when someone visits this page directly.
      window.location.replace("/");
    }
  }
</script>